<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Персонаж</title>

    <link rel="stylesheet" type="text/css" href="/assets/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/common/css/main.min.css">
    <link rel="stylesheet" type="text/css" href="/node_modules/sweetalert2/dist/sweetalert2.min.css">
    <link rel="stylesheet" type="text/css" href="/node_modules/bootstrap-select/dist/css/bootstrap-select.min.css">

    <!-- Vendors Scripts -->
    <!-- v1.0.0 -->
    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/tether/dist/js/tether.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/node_modules/autosize/dist/autosize.min.js"></script>
    <script src="/node_modules/jscrollpane/script/jquery.jscrollpane.min.js"></script>
    <script src="/assets/vendors/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js"></script>
    <script src="/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    <script src="/node_modules/sweetalert2/dist/sweetalert2.min.js"></script>
    <script src="/node_modules/hammerjs/hammer.min.js"></script>
    <!-- Clean UI Scripts -->
    <script src="/node_modules/angular/angular.min.js"></script>
    <script src="/node_modules/angular-hammer/angular.hammer.min.js"></script>
    <script src="/node_modules/jquery.scrollto/jquery.scrollTo.min.js"></script>
    <script src="/node_modules/ngstorage/ngStorage.min.js"></script>

    <script src="/node_modules/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="/node_modules/i18next/i18next.min.js"></script>
    <script src="/node_modules/i18next-xhr-backend/i18nextXHRBackend.min.js"></script>
    <script src="/node_modules/ng-i18next/dist/ng-i18next.min.js"></script>
    <script src="/views/i18-initialization.js"></script>

    <script src="/assets/common/js/common.min.js"></script>
    <script src="/assets/common/js/menu.js"></script>
    <script src="/assets/common/js/tooltip.min.js"></script>

    <script src="../permissions/permissions.js"></script>
    <script src="personage_main_controller.js"></script>
    <script src="../permissions/check_player_permissions.js"></script>
</head>
<body class="theme-default menu-left layout-boxed mode-box-shadow" ng-app="personageApp" ng-cloak>
<div id="loader"></div>
<div class="boxed-container" ng-controller="permissionsController">
    <div ng-controller="personageController">
        <nav class="left-menu" left-menu ng-class="{'hidden-left-menu': hideLeftMenu}">
            <div class="logo-container">
                <a href="#" class="logo">
                    <h1 ng-i18next>general.brand_name</h1>
                </a>
            </div>
            <div class="left-menu-inner scroll-pane">
                <ul class="left-menu-list left-menu-list-root list-unstyled">
                    <li>
                        <a class="left-menu-link" href="/views/user_personage_manager.html?id={{player.id}}">
                            <i class="left-menu-link-icon fa fa-users"><!-- --></i>
                            <span ng-i18next>left_menu.characters</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/races/race_manager.html">
                            <i class="left-menu-link-icon fa fa-users"><!-- --></i>
                            <span ng-i18next>left_menu.races</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/attributes/attribute_manager.html">
                            <i class="left-menu-link-icon fa  fa-diamond"><!-- --></i>
                            <span ng-i18next>left_menu.attributes</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/inherents/inherent_manager.html">
                            <i class="left-menu-link-icon fa fa-american-sign-language-interpreting"><!-- --></i>
                            <span ng-i18next>left_menu.inherents</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/attached_skills/attached_skills_manager.html">
                            <i class="left-menu-link-icon fa fa-asterisk"><!-- --></i>
                            <span ng-i18next>left_menu.attached_skills</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/trigger_skills/trigger_skills_manager.html">
                            <i class="left-menu-link-icon icmn-stack3"><!-- --></i>
                            <span ng-i18next>left_menu.trigger_skills</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/merits/merit_manager.html">
                            <i class="left-menu-link-icon fa fa-smile-o"><!-- --></i>
                            <span ng-i18next>left_menu.merits</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/flaws/flaw_manager.html">
                            <i class="left-menu-link-icon fa fa-meh-o"><!-- --></i>
                            <span ng-i18next>left_menu.flaws</span>
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="/views/spells/spells_manager.html">
                            <i class="left-menu-link-icon fa fa-fire"><!-- --></i>
                            <span ng-i18next>left_menu.spells</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <nav class="top-menu" ng-class="{'hidden-top-menu': hideTopMenu}">
            <div class="menu-icon-container hidden-md-up">
                <div class="animate-menu-button left-menu-toggle">
                    <div><!-- --></div>
                </div>
            </div>
            <div class="menu">
                <div class="menu-user-block">
                    <div class="dropdown dropdown-avatar">
                        <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown"
                           aria-expanded="false">
                            <span class="user-name"><span
                                    ng-i18next>top_menu.player</span><strong> {{player.name}}</strong></span>
                            <span class="avatar" href="#">
                        <img ng-src="http://res.cloudinary.com/hjzqny4m9/image/upload/v1497780414/{{userAvatar(player.id)}}"
                             alt="Здесь должен быть аватар">
                    </span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                            <a class="dropdown-item" href="/views/profile/profile.html"><i
                                    class="dropdown-icon icmn-user"></i><span
                                    ng-i18next>top_menu.dropdown.profile</span></a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/views/user_personage_manager.html?id={{player.id}}"><i
                                    class="dropdown-icon icmn-circle-right"></i><span ng-i18next>top_menu.dropdown.characters</span></a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/" ng-click="deleteUserCookie()"><i
                                    class="dropdown-icon icmn-exit"></i><span ng-i18next>top_menu.dropdown.logout</span></a>
                            <div class="dropdown-divider" ng-show="hasManagePermissionsAccess()"></div>
                            <a class="dropdown-item" href="/views/permissions/managePermissions.html"
                               ng-show="hasManagePermissionsAccess()"><i class="dropdown-icon icmn-cog2"></i><span
                                    ng-i18next>top_menu.dropdown.admin</span></a>
                        </ul>
                    </div>
                </div>

                <div class="menu-user-block">
                    <a class="menu-user-info-block nohover" href="javascript: void(0)" ng-click="editExperince()">
                        <span class="user-name">XP: <strong>{{personage.experience}}</strong></span>
                    </a>
                </div>

                <div class="menu-info-block">
                    <div class="left">
                        <div class="menu-info-block">
                            <div class="example-buy-btn hidden-xs-down">
                                <div class="btn expir btn-success-outline btn-rounded">
                                    <span ng-i18next>top_menu.role</span> {{player.Role.name}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </nav>

        <section class="page-content hide">
            <div class="panel">
                <div class="panel-heading">
                    <h3 class="text-center" ng-i18next>page.character.create_header</h3>
                    <div class="dropdown">
                        <h3>
                            <a class="dropdown-toggle color-primary" href="" data-toggle="dropdown"
                               aria-expanded="false"
                               ng-show="hideEditBlock">
                                {{personage.name}}
                                <span class="ink animate"></span>
                            </a>

                            <form ng-hide="hideEditBlock" novalidate>
                                <div class="group" style="margin-top: -20px;">
                                    <i class="icmn-checkmark3 personage-name" style="cursor: pointer"
                                       ng-click="savePersonageName()"></i>
                                    <input class="name-material-form" ng-blur="savePersonageName()"
                                           ng-keypress="saveIfEnterPress($event)" type="text" required>
                                    <span class="highlight"></span>
                                    <span class="bar"></span>
                                    <label class="name-material-form">{{oldName}}</label>
                                </div>
                            </form>

                            <a ng-click="hideEditBlock = false" ng-show="hideEditBlock"
                               class="btn btn-icon icmn-pencil btn-link editButton"
                               href="javascript: void(0);"></a>
                            <ul class="dropdown-menu dropdown-animate" aria-labelledby="" role="menu">
                                <a class="dropdown-item text">
                                    <span ng-i18next>character_dropdown.race</span>
                                    {{personage.Race.name}}</a>
                                <a class="dropdown-item text"><span ng-i18next>character_dropdown.age</span>
                                    {{personage.age}}
                                    <span ng-i18next>character_dropdown.years</span></a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item text"><span ng-i18next>character_dropdown.experience</span>
                                    {{personage.experience}}</a>
                            </ul>
                        </h3>
                    </div>
                    <button ng-show="hideEditBlock" ng-disabled="personage.experience < 0" type="button"
                            class="btn btn-info btn-rounded pull-right save-personage"
                            ng-click="savePersonage()"><strong ng-i18next>page.character.upper.save</strong>
                    </button>
                </div>
                <div class="panel-body">
                    <div class="table-responsive hidden-md-up" id="steps">
                        <table id="buttons" class="table">
                            <tr>
                                <td>
                                    <button class="btn inherentsButton active" ng-i18next>
                                        page.character.mobile.inherents
                                    </button>
                                </td>
                                <td>
                                    <button class="btn attributesButton" ng-i18next>page.character.mobile.attributes
                                    </button>
                                </td>
                                <td>
                                    <button class="btn attachedButton" ng-i18next>page.character.mobile.attached
                                    </button>
                                </td>
                                <td>
                                    <button class="btn triggerButton" ng-i18next>page.character.mobile.trigger</button>
                                </td>
                                <td>
                                    <button class="btn meritsButton" ng-i18next>page.character.mobile.merits</button>
                                </td>
                                <td>
                                    <button class="btn flawsButton" ng-i18next>page.character.mobile.flaws</button>
                                </td>
                                <td>
                                    <button class="btn spellsButton" ng-i18next>page.character.mobile.spells</button>
                                </td>
                                <td>
                                    <button class="btn notesButton" ng-i18next>page.character.mobile.notices</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="hidden-xs-down hidden-sm-down createEditDiv">
                        <button class="btn createEditTabs inherentsButton active">
                            <span ng-i18next>page.character.upper.inherents</span>
                            <div class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs attributesButton">
                            <span ng-i18next>page.character.upper.attributes</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs attachedButton">
                            <span ng-i18next>page.character.upper.attached</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs triggerButton">
                            <span ng-i18next>page.character.upper.trigger</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs meritsButton">
                            <span ng-i18next>page.character.upper.merits</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs flawsButton">
                            <span ng-i18next>page.character.upper.flaws</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs spellsButton">
                            <span ng-i18next>page.character.upper.spells</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                        <button class="btn createEditTabs notesButton">
                            <span ng-i18next>page.character.upper.notices</span>
                            <div style="display: none" class="arrow-down"></div>
                        </button>
                    </div>

                    <div id="inherents" class="tab-pane active table-responsive" role="tabpanel">
                        <table class="table table-hover">
                            <tbody ng-repeat="personageInherent in personageInherents">
                            <tr>
                                <td ng-click="showHideDescription(personageInherent.Inherent)"
                                    style="cursor:pointer;">
                                    <div class="text-left disable-select">
                                        <i ng-hide="isShowItem(personageInherent.Inherent.id)"
                                           class="icmn-circle-down2 margin-inline"></i><i
                                            ng-show="isShowItem(personageInherent.Inherent.id)"
                                            class="icmn-circle-up2 margin-inline"></i>{{personageInherent.Inherent.name}}
                                    </div>
                                </td>
                                <td>
                                    <div ng-if="personageInherent.Inherent.min_limit && personageInherent.Inherent.max_limit">
                                        {{personageInherent.value}}
                                    </div>
                                </td>
                                <td>
                                    <button class="btn btn-default-outline btn-rounded btn-sm"
                                            ng-click="deletePersonageInherent(personageInherent.id)" ng-i18next>
                                        general.delete
                                    </button>
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(personageInherent.Inherent.id)">
                                <td colspan="3">
                                    <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                    {{personageInherent.Inherent.description}}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div ng-if="showGenerateInherentsButton">
                            <ul>
                                <li style="list-style-type: none" ng-i18next>page.character.inherents_disclaimer</li>
                            </ul>
                            <button class="btn btn-rounded btn-primary-outline"
                                    style="margin-bottom: 10px;margin-left: 40px"
                                    ng-click="randomizeInherentsAndValues()" ng-i18next>
                                page.character.randomize_inherents
                            </button>
                        </div>

                        <form name="addPersonageInherentForm" style="width: 98%">
                            <div class="form-group row">
                                <label class="control-label col-md-2" for="inherent_id"
                                       style="padding-left: 8% !important;padding-top: 0.5%;" ng-i18next>page.character.quality_label</label>
                                <div class="col-md-5">
                                    <select class="form-control"
                                            ng-model="inherent_id" id="inherent_id"
                                            ng-options="inherent.id as inherent.name for inherent in inherents">
                                        <option style="display:none" value="" ng-i18next>
                                            page.character.quality_placeholder
                                        </option>
                                    </select>
                                </div>

                                <div class="col-sm-3">
                                    <input type="number" ng-model="personageInherentValue" class="form-control">
                                </div>

                                <div class="col-md-2">
                                    <button class="btn" ng-click="addPersonageInherent()" ng-i18next>popup.add_button
                                    </button>
                                </div>

                            </div>
                        </form>
                    </div>
                    <div id="attr" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row">
                            <div class="col-md-2 hidden-xs-down hidden-sm-down">
                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="hitPiercePunch"
                                            ng-click="hitPiercePunchAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.hit_pierce_punch"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/hitPiercePunch.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{hitPiercePunch}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="hitChopPunch" ng-click="hitChopPunchAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.hit_chop_punch"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/hitChopPunch.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{hitChopPunch}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived" id="rangedHit"
                                            ng-click="rangedHitAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.ranged_hit"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/rangedHit.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{rangedHit}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="parryPiercePunch"
                                            ng-click="parryPiercePunchAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.parry_pierce_punch"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/parryPiercePunch.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{parryPiercePunch}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="parryChopPunch"
                                            ng-click="parryChopPunchAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.parry_chop_punch"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/parryChopPunch.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{parryChopPunch}}</span>
                                </div>

                            </div>
                            <div class="col-md-2 hidden-xs-down hidden-sm-down">

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived" id="dodge"
                                            ng-click="dodgeAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.dodge"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/dodge.svg" class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{dodge}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="generalActionPoints"
                                            ng-click="generalActionPointsAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.general_action_points"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/generalActionPoints.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{generalActionPoints}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="mentalActionPoints"
                                            ng-click="mentalActionPointsAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.mental_action_points"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/mentalActionPoints.png"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{mentalActionPoints}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived"
                                            id="endurancePoints"
                                            ng-click="endurancePointsAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.endurance_points"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/endurancePoints.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{endurancePoints}}</span>
                                </div>

                                <div style="width: 100%;">
                                    <button class="btn btn-rounded margin-inline derived" id="initiative"
                                            ng-click="initiativeAnimateRelatedAttributes($event)"
                                            ng-i18next="[title]page.character.derivative.initiative"
                                            rel="tooltip">
                                        <img src="/assets/common/img/erilon-icon/initiative.svg"
                                             class="derived tooltips">
                                        <div class="arrow-right"></div>
                                    </button>
                                    <span class="derived">{{initiative}}</span>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <table id="attrTable" class="table table-hover">
                                    <tbody ng-repeat="personageAttribute in personageAttributes | orderBy:getAttributePosition"
                                           ng-hide="ifMagic(personageAttribute)">
                                    <tr>
                                        <td id="{{personageAttribute.Attribute.name}}"
                                            ng-click="showHideDescription(personageAttribute.Attribute)"
                                            style="cursor:pointer;">
                                            <div class="text-left disable-select">
                                                <i ng-hide="isShowItem(personageAttribute.Attribute.id)"
                                                   class="icmn-circle-down2 margin-inline"></i><i
                                                    ng-show="isShowItem(personageAttribute.Attribute.id)"
                                                    class="icmn-circle-up2 margin-inline"></i>{{personageAttribute.Attribute.name}}
                                            </div>
                                        </td>
                                        <td>
                                            <div class="btn-group btn-group-justified plus-minus-block">
                                                <div class="btn-group">
                                                    <button class="btn btn-rounded btn-sm btn-secondary btn-decrease"
                                                            ng-click="decreaseAttribute(personageAttribute)"
                                                            type="button"
                                                            ng-disabled="personageAttribute.value < 2">
                                                        <i class="icmn-minus"></i>
                                                    </button>
                                                </div>
                                                <div class="btn-group">
                                                    <button class="btn btn-rounded btn-sm btn-success"
                                                            ng-click="increaseAttribute(personageAttribute)"
                                                            type="button">
                                                        <i class="icmn-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ personageAttribute.value }}</td>
                                    </tr>
                                    <tr ng-show="isShowItem(personageAttribute.Attribute.id)">
                                        <td colspan="3">
                                            <strong class="padding-left-10"
                                                    ng-i18next>page.character.description</strong>
                                            {{personageAttribute.Attribute.description}}
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="o-wrapper-attributes hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button">
                                    <button class="btn slide-button" id="characteristics"
                                            ng-click="openHideAttributesCategoriesFilterMenu()"
                                            hm-swipeup="openHideAttributesCategoriesFilterMenu()"
                                            hm-swipedown="openHideAttributesCategoriesFilterMenu()" ng-i18next>
                                        page.character.derivatives
                                        <i class="fa fa-angle-double-down" ng-hide="isCategoryAttributesMenuClose"></i>
                                        <i class="fa fa-angle-double-up" ng-show="isCategoryAttributesMenuClose"></i>
                                    </button>
                                </div>
                                <hr/>
                                <div class="row" style="margin-top: 20px">
                                    <div class="col-sm-6 col-xs-6">
                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.hit_pierce_punch"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/hitPiercePunch.svg"
                                                 class="ng-scope"
                                                 height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{hitPiercePunch}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.hit_chop_punch"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/hitChopPunch.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{hitChopPunch}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.ranged_hit"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/rangedHit.svg"
                                                 class="ng-scope tooltips" height="40" width="40">
                                            <span class="ng-binding ng-scope">{{rangedHit}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.parry_pierce_punch"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/parryPiercePunch.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{parryPiercePunch}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.parry_chop_punch"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/parryChopPunch.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{parryChopPunch}}</span>
                                        </button>

                                    </div>
                                    <div class="col-sm-6 col-xs-6">

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.dodge"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/dodge.svg"
                                                 class="ng-scope tooltips"
                                                 height="40" width="40">
                                            <span class="ng-binding ng-scope">{{dodge}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.general_action_points"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/generalActionPoints.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{generalActionPoints}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.mental_action_points"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/mentalActionPoints.png"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{mentalActionPoints}}</span>
                                        </button>

                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.endurance_points"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/endurancePoints.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{endurancePoints}}</span>
                                        </button>
                                        <button class="btn btn-info-outline btn-rounded produced margin-inline"
                                                ng-i18next="[title]page.character.derivative.initiative"
                                                rel="tooltip">
                                            <img src="/assets/common/img/erilon-icon/initiative.svg"
                                                 class="ng-scope tooltips" height="40"
                                                 width="40">
                                            <span class="ng-binding ng-scope">{{initiative}}</span>
                                        </button>
                                    </div>
                                </div>
                            </nav>

                            <div class="c-mask" ng-click="openHideAttributesCategoriesFilterMenu()"></div>
                        </div>
                    </div>
                    <div id="attached" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row hidden-xs-down hidden-sm-down">
                            <div class="col-md-2">
                                <h2 style="padding-top: 10px; padding-left: 5px"><span class="label label-warning"
                                                                                       ng-i18next>page.character.categories_label</span>
                                </h2>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input name="magic" type="checkbox" ng-model="filter.magic" id="magicSkillsFilter"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.magic', filter.magic)">
                                    <label for="magicSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.magic
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="socialSkillsFilter" name="social" type="checkbox"
                                           ng-model="filter.attached_social"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.social', filter.attached_social)">
                                    <label for="socialSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.social
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input name="languages" type="checkbox" ng-model="filter.language"
                                           id="languageFiler"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.languages', filter.language)">
                                    <label for="languageFiler" ng-i18next>
                                        page.character.attached_skills_categories.languages
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="knowledgeSkillsFilter" name="knowledge" type="checkbox"
                                           ng-model="filter.knowledge"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.lores', filter.knowledge)">
                                    <label for="knowledgeSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.lores
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="craftsSkillsFilter" name="crafts" type="checkbox" ng-model="filter.craft"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.crafts', filter.craft)">
                                    <label for="craftsSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.crafts
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="profSkillsFilter" name="professional" type="checkbox"
                                           ng-model="filter.prof"
                                           ng-change="filterAttachedSkillsByCategory('page.character.attached_skills_categories.professional', filter.prof)">
                                    <label for="profSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.professional
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="checkbox checkbox-info">
                                    <input id="defaultSkillsShow" name="default" type="checkbox"
                                           ng-model="show.default_skill"
                                           ng-change="filterAttachedSkillsByDefaultShow(show.default_skill)">
                                    <label for="defaultSkillsShow" ng-i18next>
                                        page.character.attached_skills_categories.by_default_show
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="defaultSkillsFilter" name="default" type="checkbox"
                                           ng-model="search.default_skill"
                                           ng-disabled="!show.default_skill"
                                           ng-change="filterAttachedSkillsByDefault(search.default_skill)">
                                    <label for="defaultSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.by_default_filter
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="theoreticalSkillsFilter" name="theoretical" type="checkbox"
                                           ng-model="search.theoretical"
                                           ng-change="filterAttachedSkillsByTheoretical(search.theoretical)">
                                    <label for="theoreticalSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.theoretical
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="addedAttachedSkillsFilter" name="added" type="checkbox"
                                           ng-model="addedAttachedSkillsFilter" ng-change="openDetails = []">
                                    <label for="addedAttachedSkillsFilter" ng-i18next>
                                        page.character.attached_skills_categories.gained
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="o-wrapper-attached-skills hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button" ng-click="openHideAttachedSkillsCategoriesFilerMenu()"
                                     hm-swipeup="openHideAttachedSkillsCategoriesFilerMenu()"
                                     hm-swipedown="openHideAttachedSkillsCategoriesFilerMenu()" ng-i18next>
                                    page.character.categories_label_mobile
                                    <i class="fa fa-angle-double-down" ng-hide="isCategoryAttachedSkillsMenuClose"></i>
                                    <i class="fa fa-angle-double-up" ng-show="isCategoryAttachedSkillsMenuClose"></i>
                                </div>
                                <hr/>
                                <table class="table table-hover category-table"
                                       style="margin-bottom: 0">
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.magic', filter.magic)">
                                        <td style="width: 15%;">
                                            <i ng-show="filter.magic" class="fa fa-check"></i>
                                            <input name="magic" type="checkbox" ng-model="filter.magic"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.magic
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.social', filter.attached_social)">
                                        <td>
                                            <i ng-show="filter.attached_social" class="fa fa-check"></i>
                                            <input name="social" type="checkbox" ng-model="filter.attached_social"
                                                   style="display: none;" ng-i18next>
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.social
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.languages', filter.language)">
                                        <td>
                                            <i ng-show="filter.language" class="fa fa-check"></i>
                                            <input name="languages" type="checkbox" ng-model="filter.language"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.languages
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.lores', filter.knowledge)">
                                        <td>
                                            <i ng-show="filter.knowledge" class="fa fa-check"></i>
                                            <input name="knowledge" type="checkbox" ng-model="filter.knowledge"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.lores
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.crafts', filter.craft)">
                                        <td>
                                            <i ng-show="filter.craft" class="fa fa-check"></i>
                                            <input name="crafts" type="checkbox" ng-model="filter.craft"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.crafts
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByCategory('page.character.attached_skills_categories.professional', filter.prof)">
                                        <td>
                                            <i ng-show="filter.prof" class="fa fa-check"></i>
                                            <input name="professional" type="checkbox" ng-model="filter.prof"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.professional
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByDefault(search.default_skill)">
                                        <td>
                                            <i ng-show="search.default_skill" class="fa fa-check"></i>
                                            <input name="default" type="checkbox"
                                                   ng-model="search.default_skill" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.by_default
                                        </td>
                                    </tr>
                                    <tr ng-click="filterAttachedSkillsByTheoretical(search.theoretical)">
                                        <td>
                                            <i ng-show="search.theoretical" class="fa fa-check"></i>
                                            <input name="theoretical" type="checkbox"
                                                   ng-model="search.theoretical" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.theoretical
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i ng-show="addedAttachedSkillsFilter" class="fa fa-check"></i>
                                            <input name="addedAttachedSkillsFilter" type="checkbox"
                                                   ng-model="addedAttachedSkillsFilter" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.attached_skills_categories.gained
                                        </td>
                                    </tr>
                                </table>
                            </nav>

                            <div class="c-mask" ng-click="openHideAttachedSkillsCategoriesFilerMenu()"></div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="attachedSkillsSearch.attachedSkill.name"
                                           class="form-control"
                                           ng-i18next="[placeholder]page.character.search_attached_skill_placeholder"
                                           id="attachedSkillsSearch">
                                </div>
                            </div>
                        </div>

                        <table class="table mobile">
                            <thead class="mobile">
                            <tr class="mobile">
                                <th class="mobile" ng-i18next>table.header.skill</th>
                                <th class="mobile text-center" ng-i18next>table.header.difficult</th>
                                <th class="mobile text-center" ng-i18next>table.header.theoretical</th>
                                <th class="mobile"></th>
                                <th class="mobile text-center" ng-i18next>table.header.value</th>
                                <th class="mobile" ng-i18next></th>
                            </tr>
                            </thead>
                            <tbody class="mobile"
                                   ng-repeat="item in attachedSkillsMixed | filter: attachedSkillsSearch | orderBy:'attachedSkill.name'">
                            <tr class="mobile attached"
                                ng-hide="filteredAttachedSkills(item)"
                                ng-class="addNotAddedClass(item.personageAttachedSkill)">
                                <td class="text-right mobile attached"
                                    ng-click="showHideDescription(item.attachedSkill)"
                                    style="cursor:pointer;width: 15%">
                                    <div class="text-left disable-select">
                                        <i ng-hide="isShowItem(item.attachedSkill.id)"
                                           class="icmn-circle-down2 margin-inline"></i><i
                                            ng-show="isShowItem(item.attachedSkill.id)"
                                            class="icmn-circle-up2 margin-inline"></i>{{item.attachedSkill.name}}
                                    </div>
                                </td>

                                <td class="text-right mobile attached">
                                    <div class="text-center" ng-if="item.attachedSkill.difficult">
                                        <i class="icmn-plus"></i>
                                    </div>
                                    <div class="text-center" ng-if="!item.attachedSkill.difficult">
                                        <i class="icmn-minus"></i>
                                    </div>
                                </td>

                                <td class="text-right mobile attached">
                                    <div class="text-center" ng-if="item.attachedSkill.theoretical">
                                        <i class="icmn-plus"></i>
                                    </div>
                                    <div class="text-center" ng-if="!item.attachedSkill.theoretical">
                                        <i class="icmn-minus"></i>
                                    </div>
                                </td>

                                <td class="text-right mobile attached">
                                    <div class="btn-group btn-group-justified plus-minus-block">
                                        <div class="btn-group">
                                            <button class="btn btn-rounded btn-sm btn-secondary"
                                                    ng-disabled="item.personageAttachedSkill == null"
                                                    ng-click="decreaseAttachedSkill(item.personageAttachedSkill)"
                                                    type="button">
                                                <i class="icmn-minus"></i>
                                            </button>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-rounded btn-sm btn-primary"
                                                    ng-disabled="item.personageAttachedSkill == null"
                                                    ng-click="increaseAttachedSkill(item.personageAttachedSkill)"
                                                    type="button">
                                                <i class="icmn-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </td>

                                <td class="text-right mobile attached">
                                    <div class="text-center" ng-if="item.personageAttachedSkill != null">
                                        {{item.personageAttachedSkill.value}}
                                    </div>
                                    <div class="text-center" ng-if="item.personageAttachedSkill == null">
                                        -
                                    </div>
                                </td>

                                <td class="text-right mobile attached actions">
                                    <div class="text-center">
                                        <div ng-if="item.personageAttachedSkill != null && !item.personageAttachedSkill.AttachedSkill.default_skill">
                                            <button class="btn btn-default-outline btn-rounded btn-sm"
                                                    style="cursor: pointer;"
                                                    ng-click="deletePersonageAttachedSkill(item.personageAttachedSkill)"
                                                    ng-i18next>
                                                general.delete
                                            </button>
                                        </div>

                                        <div ng-if="item.personageAttachedSkill == null && !item.personageAttachedSkill.AttachedSkill.default_skill">
                                            <button class="btn btn-rounded btn-warning btn-sm"
                                                    href="javascript: void(0)"
                                                    ng-click="addPersonageAttachedSkill(item.attachedSkill)" ng-i18next>
                                                popup.add_button
                                            </button>
                                        </div>
                                        <div ng-if="item.personageAttachedSkill.AttachedSkill.default_skill" ng-i18next>
                                            general.by_default
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(item.attachedSkill.id)"
                                ng-class="addNotAddedClass(item.personageAttachedSkill)">
                                <td colspan="6">
                                    <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                    {{item.attachedSkill.description}}
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(item.attachedSkill.id)"
                                ng-class="addNotAddedClass(item.personageAttachedSkill)">
                                <td colspan="6">
                                    <strong class="padding-left-10" ng-i18next>page.character.rolls</strong>
                                    <div ng-repeat="attachedSkillAttribute in item.attachedSkill.AttachedSkillAttributes">
                                        {{attachedSkillAttribute.description}}:
                                        {{attachedSkillAttribute.Attribute.name}}+{{item.attachedSkill.name}}<span
                                            ng-if="item.personageAttachedSkill !=null">={{getPersonageAttributeValue(attachedSkillAttribute.Attribute)+item.personageAttachedSkill.value}}
                                            </span>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="trigger" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row hidden-xs-down hidden-sm-down">
                            <div class="col-md-2">
                                <h2 style="padding-top: 10px; padding-left: 5px"><span class="label label-warning"
                                                                                       ng-i18next>page.character.categories_label</span>
                                </h2>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input name="fight" type="checkbox" ng-model="filter.fight" id="fightFilter"
                                           ng-change="filterTriggerSkillsByCategory('page.character.trigger_skills_categories.fight', filter.fight)">
                                    <label for="fightFilter" ng-i18next>
                                        page.character.trigger_skills_categories.fight
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">

                                    <input name="nonfight" type="checkbox" ng-model="filter.nonfight"
                                           id="nonfightFilter"
                                           ng-change="filterTriggerSkillsByCategory('page.character.trigger_skills_categories.no_fight', filter.nonfight)">
                                    <label for="nonfightFilter" ng-i18next>
                                        page.character.trigger_skills_categories.no_fight
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="addedTriggerSkillsFilter" name="added" type="checkbox"
                                           ng-model="addedTriggerSkillsFilter" ng-change="openDetails = []">
                                    <label for="addedTriggerSkillsFilter" ng-i18next>
                                        page.character.trigger_skills_categories.gained
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="o-wrapper-trigger-skills hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button" ng-click="openHideTriggerSkillsCategoriesFilerMenu()"
                                     hm-swipeup="openHideTriggerSkillsCategoriesFilerMenu()"
                                     hm-swipedown="openHideTriggerSkillsCategoriesFilerMenu()" ng-i18next>
                                    page.character.categories_label_mobile
                                    <i class="fa fa-angle-double-down" ng-hide="isCategoryTriggerSkillsMenuClose"></i>
                                    <i class="fa fa-angle-double-up" ng-show="isCategoryTriggerSkillsMenuClose"></i>
                                </div>
                                <hr/>
                                <table class="table table-hover category-table"
                                       style="margin-bottom: 0">
                                    <tr ng-click="filterTriggerSkillsByCategory('page.character.trigger_skills_categories.fight', filter.fight)">
                                        <td style="width: 15%;">
                                            <i ng-show="filter.fight" class="fa fa-check"></i>
                                            <input type="checkbox" ng-model="filter.fight" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.trigger_skills_categories.fight
                                        </td>
                                    </tr>
                                    <tr ng-click="filterTriggerSkillsByCategory('page.character.trigger_skills_categories.no_fight', filter.nonfight)">
                                        <td>
                                            <i ng-show="filter.nonfight" class="fa fa-check"></i>
                                            <input type="checkbox" ng-model="filter.nonfight" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.trigger_skills_categories.no_fight
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i ng-show="addedTriggerSkillsFilter" class="fa fa-check"></i>
                                            <input type="checkbox" ng-model="addedTriggerSkillsFilter"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.trigger_skills_categories.gained
                                        </td>
                                    </tr>
                                </table>
                            </nav>

                            <div class="c-mask" ng-click="openHideTriggerSkillsCategoriesFilerMenu()"></div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="triggerSkillsSearch.triggerSkill.name"
                                           class="form-control"
                                           ng-i18next="[placeholder]page.character.search_trigger_skill_placeholder"
                                           id="triggerSkillsSearch">
                                </div>
                            </div>
                        </div>

                        <table class="table mobile">
                            <thead class="mobile">
                            <tr class="mobile">
                                <th class="mobile" ng-i18next>table.header.skill</th>
                                <th class="mobile text-center" ng-i18next>table.header.basic_skill</th>
                                <th class="mobile"></th>
                                <th class="mobile text-center" ng-i18next>table.header.level</th>
                                <th class="mobile text-center" ng-i18next>table.header.talent</th>
                                <th class="mobile text-center" ng-i18next>table.header.tutored</th>
                                <th class="mobile"></th>
                            </tr>
                            </thead>
                            <tbody class="mobile"
                                   ng-repeat="triggerSkillMixed in triggerSkillsMixed | filter: triggerSkillsSearch | orderBy:'triggerSkill.name'">
                            <tr class="mobile trigger"
                                ng-hide="filteredTriggerSkills(triggerSkillMixed)"
                                ng-class="addDisableOrNotAddedClass(triggerSkillMixed.available, triggerSkillMixed.personageTriggerSkill)">
                                <td class="text-right mobile attached"
                                    ng-click="showHideDescription(triggerSkillMixed.triggerSkill)"
                                    style="cursor:pointer;">
                                    <div class="text-left disable-select">
                                        <i ng-hide="isShowItem(triggerSkillMixed.triggerSkill.id)"
                                           class="icmn-circle-down2 margin-inline"></i><i
                                            ng-show="isShowItem(triggerSkillMixed.triggerSkill.id)"
                                            class="icmn-circle-up2 margin-inline"></i>{{triggerSkillMixed.triggerSkill.name}}
                                    </div>
                                </td>

                                <td class="text-right mobile trigger">
                                    <div class="text-center">
                                        <div ng-if="triggerSkillMixed.triggerSkill.BaseTriggerSkill == null">
                                            -
                                        </div>
                                        <div ng-if="triggerSkillMixed.triggerSkill.BaseTriggerSkill != null">
                                            {{triggerSkillMixed.triggerSkill.BaseTriggerSkill.name}}
                                        </div>
                                    </div>
                                </td>

                                <td class="text-right mobile trigger">
                                    <div class="btn-group btn-group-justified plus-minus-block">
                                        <div class="btn-group">
                                            <button class="btn btn-rounded btn-sm btn-secondary"
                                                    ng-click="decreaseTriggerSkillLevel(triggerSkillMixed.personageTriggerSkill, false)"
                                                    type="button"
                                                    ng-disabled="triggerSkillMixed.personageTriggerSkill == null">
                                                <i class="icmn-minus"></i>
                                            </button>
                                        </div>
                                        <div class="btn-group">
                                            <button class="btn btn-rounded btn-sm btn-primary"
                                                    ng-click="increaseTriggerSkillLevel(triggerSkillMixed.personageTriggerSkill)"
                                                    type="button"
                                                    ng-disabled="triggerSkillMixed.personageTriggerSkill == null">
                                                <i class="icmn-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </td>

                                <td class="text-right mobile trigger">
                                    <div class="text-center">
                                        <div ng-if="triggerSkillMixed.personageTriggerSkill == null">
                                            -
                                        </div>
                                        <div ng-if="triggerSkillMixed.personageTriggerSkill != null">
                                            {{getLevelName(triggerSkillMixed.personageTriggerSkill.currentLevel)}}
                                        </div>
                                    </div>
                                </td>


                                <td class="text-right mobile trigger">
                                    <div class="text-center" ng-if="triggerSkillMixed.personageTriggerSkill.talented">
                                        <i class="icmn-plus"></i>
                                    </div>

                                    <div class="text-center"
                                         ng-if="!triggerSkillMixed.personageTriggerSkill.talented">
                                        <i class="icmn-minus"></i>
                                    </div>
                                </td>

                                <td class="text-right mobile trigger">
                                    <div class="text-center" ng-if="triggerSkillMixed.personageTriggerSkill.tutored">
                                        <i class="icmn-plus"></i>
                                    </div>

                                    <div class="text-center" ng-if="!triggerSkillMixed.personageTriggerSkill.tutored">
                                        <i class="icmn-minus"></i>
                                    </div>
                                </td>

                                <td class="text-right mobile trigger actions">
                                    <div class="text-center">
                                        <div ng-if="triggerSkillMixed.personageTriggerSkill != null">
                                            <button class="btn btn-default-outline btn-rounded btn-sm"
                                                    style="cursor: pointer;"
                                                    ng-click="deletePersonageTriggerSkill(triggerSkillMixed.personageTriggerSkill)"
                                                    ng-i18next>
                                                general.delete
                                            </button>
                                        </div>
                                        <div ng-if="triggerSkillMixed.personageTriggerSkill == null">
                                            <button class="btn btn-rounded btn-warning btn-sm"
                                                    href="javascript: void(0)"
                                                    ng-disabled="triggerSkillMixed.available != true"
                                                    ng-click="addPersonageTriggerSkill(triggerSkillMixed.triggerSkill)"
                                                    ng-i18next>
                                                popup.add_button
                                            </button>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(triggerSkillMixed.triggerSkill.id)"
                                ng-class="addDisableOrNotAddedClass(triggerSkillMixed.available, triggerSkillMixed.personageTriggerSkill)">
                                <td colspan="7">
                                    <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                    {{triggerSkillMixed.triggerSkill.description}}
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(triggerSkillMixed.triggerSkill.id)"
                                ng-class="addDisableOrNotAddedClass(triggerSkillMixed.available, triggerSkillMixed.personageTriggerSkill)">
                                <td colspan="7">
                                    <strong class="padding-left-10"
                                            ng-i18next>page.character.trigger_skill_mastery</strong>
                                    <p ng-repeat="level in triggerSkillMixed.triggerSkill.SkillLevels | orderBy: 'level'">
                                        <strong class="padding-left-20">{{getLevelName(level.level)}}: </strong>
                                        {{level.description}}
                                    </p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="merits" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row hidden-xs-down hidden-sm-down">
                            <div class="col-md-2">
                                <h2 style="padding-top: 10px; padding-left: 5px"><span class="label label-warning"
                                                                                       ng-i18next>page.character.categories_label</span>
                                </h2>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="magicMeritsFilter" name="fight" type="checkbox" ng-model="merit.magic"
                                           ng-change="filterMeritByCategory('магические', merit.magic)">
                                    <label for="magicMeritsFilter" ng-i18next>
                                        page.character.merits_categories.magic
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="faceMeritsFilter" name="nonfight" type="checkbox" ng-model="merit.face"
                                           ng-change="filterMeritByCategory('внешность', merit.face)">
                                    <label for="faceMeritsFilter" ng-i18next>
                                        page.character.merits_categories.face
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="specMeritsFilter" name="fight" type="checkbox"
                                           ng-model="merit.speciality"
                                           ng-change="filterMeritByCategory('специализация', merit.speciality)">
                                    <label for="specMeritsFilter" ng-i18next>
                                        page.character.merits_categories.speciality
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="fightMeritsFilter" name="nonfight" type="checkbox" ng-model="merit.fight"
                                           ng-change="filterMeritByCategory('боевые', merit.fight)">
                                    <label for="fightMeritsFilter" ng-i18next>
                                        page.character.merits_categories.fight
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="talentMeritsFilter" name="fight" type="checkbox" ng-model="merit.talent"
                                           ng-change="filterMeritByCategory('талант', merit.talent)">
                                    <label for="talentMeritsFilter" ng-i18next>
                                        page.character.merits_categories.talent
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="othersMeritsFilter" name="nonfight" type="checkbox"
                                           ng-model="merit.others"
                                           ng-change="filterMeritByCategory('остальные', merit.others)">
                                    <label for="othersMeritsFilter" ng-i18next>
                                        page.character.merits_categories.others
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="availableMeritsFilter" name="fight" type="checkbox"
                                           ng-model="filter.available"
                                           ng-change="filterMeritByAvailability(filter.available)">
                                    <label for="availableMeritsFilter" ng-i18next>
                                        page.character.merits_categories.available
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="addedMeritsFilter" name="added" type="checkbox"
                                           ng-model="addedMeritsFilter" ng-change="openDetails = []">
                                    <label for="addedMeritsFilter" ng-i18next>
                                        page.character.merits_categories.gained
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="o-wrapper-merits hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button" ng-click="openHideMeritsCategoriesFilterMenu()"
                                     hm-swipeup="openHideMeritsCategoriesFilterMenu()"
                                     hm-swipedown="openHideMeritsCategoriesFilterMenu()" ng-i18next>
                                    page.character.categories_label_mobile
                                    <i class="fa fa-angle-double-down" ng-hide="isCategoryMeritsMenuClose"></i>
                                    <i class="fa fa-angle-double-up" ng-show="isCategoryMeritsMenuClose"></i>
                                </div>
                                <hr/>
                                <table class="table table-hover category-table"
                                       style="margin-bottom: 0">
                                    <tr ng-click="filterMeritByCategory('магические', merit.magic)">
                                        <td style="width: 15%;">
                                            <i ng-show="merit.magic" class="fa fa-check"></i>
                                            <input name="magic" type="checkbox" ng-model="merit.magic"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.magic
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByCategory('внешность', merit.face)">
                                        <td>
                                            <i ng-show="merit.face" class="fa fa-check"></i>
                                            <input name="face" type="checkbox" ng-model="merit.face"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.face
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByCategory('специализация', merit.speciality)">
                                        <td>
                                            <i ng-show="merit.speciality" class="fa fa-check"></i>
                                            <input name="speciality" type="checkbox" ng-model="merit.speciality"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.speciality
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByCategory('боевые', merit.fight)">
                                        <td>
                                            <i ng-show="merit.fight" class="fa fa-check"></i>
                                            <input name="fight" type="checkbox" ng-model="merit.fight"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.fight
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByCategory('ремесла', merit.talent)">
                                        <td>
                                            <i ng-show="merit.talent" class="fa fa-check"></i>
                                            <input name="talent" type="checkbox" ng-model="merit.talent"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.talent
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByCategory('остальные', merit.others)">
                                        <td>
                                            <i ng-show="merit.others" class="fa fa-check"></i>
                                            <input name="others" type="checkbox" ng-model="merit.others"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.others
                                        </td>
                                    </tr>
                                    <tr ng-click="filterMeritByAvailability(filter.available)">
                                        <td>
                                            <i ng-show="filter.available" class="fa fa-check"></i>
                                            <input name="available" type="checkbox" ng-model="filter.available"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.available
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i ng-show="addedMeritsFilter" class="fa fa-check"></i>
                                            <input name="addedMeritsFilter" type="checkbox" ng-model="addedMeritsFilter"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.merits_categories.gained
                                        </td>
                                    </tr>

                                </table>
                            </nav>

                            <div class="c-mask" ng-click="openHideMeritsCategoriesFilterMenu()"></div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="meritSearch.merit.name" class="form-control"
                                           ng-i18next="[placeholder]page.character.search_merit_placeholder"
                                           id="meritSearch">
                                </div>
                            </div>
                        </div>

                        <table class="table">
                            <thead class="mobile">
                            <tr class="mobile">
                                <th class="mobile" ng-i18next>table.header.merit</th>
                                <th class="mobile" ng-i18next>table.header.prerequisites</th>
                                <th class="mobile" ng-i18next>table.header.cost</th>
                                <th class="mobile"></th>
                            </tr>
                            </thead>
                            <tbody class="mobile"
                                   ng-repeat="meritMixed in meritsMixed | filter: meritSearch | orderBy:'merit.name'">
                            <tr class="mobile merit"
                                ng-hide="filteredMerit(meritMixed)"
                                ng-class="addDisableOrNotAddedClass(meritMixed.available, meritMixed.personageMerit)">
                                <td class="text-right mobile merit" ng-click="showHideDescription(meritMixed.merit)"
                                    style="cursor:pointer;">
                                    <div class="text-left disable-select">
                                        <i ng-hide="isShowItem(meritMixed.merit.id)"
                                           class="icmn-circle-down2 margin-inline"></i><i
                                            ng-show="isShowItem(meritMixed.merit.id)"
                                            class="icmn-circle-up2 margin-inline"></i>{{meritMixed.merit.name}}
                                    </div>
                                </td>
                                <td class="text-right mobile merit">
                                    <div class="text-left">
                                    <span ng-hide="meritMixed.available == true">
                                        <strong ng-repeat="item in meritMixed.available">
                                            {{ item.name }}: {{item.expectedValue}}<span
                                                ng-hide="$last">,</span>
                                        </strong>
                                    </span>
                                        <span ng-if="meritMixed.available == true">
                                                 -
                                    </span>
                                    </div>
                                </td>
                                <td class="text-right mobile merit">
                                    <div class="text-left">
                                        <div ng-if="meritMixed.personageMerit != null && !meritMixed.personageMerit.unremovable">
                                            {{meritMixed.personageMerit.Merit.cost}}
                                        </div>
                                        <div ng-if="meritMixed.personageMerit != null && meritMixed.personageMerit.unremovable">
                                            -
                                        </div>
                                        <div ng-if="meritMixed.personageMerit == null">
                                            {{meritMixed.merit.cost}}
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right mobile merit actions">
                                    <div class="text-center">
                                        <div ng-if="meritMixed.personageMerit != null && !meritMixed.personageMerit.unremovable">
                                            <button class="btn btn-default-outline btn-rounded btn-sm"
                                                    style="cursor: pointer;"
                                                    ng-click="checkPrerequisitesAndDeletePersonageMerit(meritMixed.personageMerit)"
                                                    ng-i18next>
                                                general.delete
                                            </button>
                                        </div>
                                        <div ng-if="meritMixed.personageMerit == null">
                                            <button class="btn btn-rounded btn-warning btn-sm"
                                                    ng-disabled="meritMixed.available != true"
                                                    href="javascript: void(0)"
                                                    ng-click="addPersonageMerit(meritMixed.merit)" ng-i18next>
                                                popup.add_button
                                            </button>
                                        </div>
                                        <div ng-if="meritMixed.personageMerit.unremovable" ng-i18next>
                                            general.by_default
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(meritMixed.merit.id)"
                                ng-class="addDisableOrNotAddedClass(meritMixed.available, meritMixed.personageMerit)">
                                <td colspan="4">
                                    <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                    {{meritMixed.merit.description}}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="flaws" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row hidden-xs-down hidden-sm-down">
                            <div class="col-md-2">
                                <h2 style="padding-top: 10px; padding-left: 5px"><span class="label label-warning"
                                                                                       ng-i18next>page.character.categories_label</span>
                                </h2>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="physicalFlawsFilter" name="phycical" type="checkbox"
                                           ng-model="filter.phycical"
                                           ng-change="filterFlawsByCategory('физические', filter.phycical)">
                                    <label for="physicalFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.physical
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="mentalFlawsFilter" name="mental" type="checkbox" ng-model="filter.mental"
                                           ng-change="filterFlawsByCategory('ментальные', filter.mental)">
                                    <label for="mentalFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.mental
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="socialFlawsFilter" name="social" type="checkbox" ng-model="filter.social"
                                           ng-change="filterFlawsByCategory('социальные', filter.social)">
                                    <label for="socialFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.social
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="kodeksFlawsFilter" name="kodeks" type="checkbox" ng-model="filter.kodeks"
                                           ng-change="filterFlawsByCategory('кодекс чести', filter.kodeks)">
                                    <label for="kodeksFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.codex
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="faceFlawsFilter" name="face" type="checkbox" ng-model="filter.face"
                                           ng-change="filterFlawsByCategory('внешность', filter.face)">
                                    <label for="faceFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.face
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="misticFlawsFilter" name="face" type="checkbox" ng-model="filter.mistic"
                                           ng-change="filterFlawsByCategory('мистические', filter.mistic)">
                                    <label for="misticFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.mystic
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="unremovableFlawsFilter" name="unremovable" type="checkbox"
                                           ng-model="search.unremovable"
                                           ng-change="filterFlawsByUnremovable(search.unremovable)">
                                    <label for="unremovableFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.unremovable
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="addedFlawsFilter" name="added" type="checkbox"
                                           ng-model="addedFlawsFilter" ng-change="openDetails = []">
                                    <label for="addedFlawsFilter" ng-i18next>
                                        page.character.flaws_categories.gained
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="o-wrapper-flaws hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button" ng-click="openHideFlawsCategoriesFilterMenu()"
                                     hm-swipeup="openHideFlawsCategoriesFilterMenu()"
                                     hm-swipedown="openHideFlawsCategoriesFilterMenu()" ng-i18next>
                                    page.character.categories_label_mobile
                                    <i class="fa fa-angle-double-down" ng-hide="isCategoryFlawsMenuClose"></i>
                                    <i class="fa fa-angle-double-up" ng-show="isCategoryFlawsMenuClose"></i>
                                </div>
                                <hr/>
                                <table class="table table-hover category-table"
                                       style="margin-bottom: 0">
                                    <tr ng-click="filterFlawsByCategory('физические', filter.phycical)">
                                        <td style="width: 15%;">
                                            <i ng-show="filter.phycical" class="fa fa-check"></i>
                                            <input name="phycical" type="checkbox" ng-model="filter.phycical"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.physical
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByCategory('ментальные', filter.mental)">
                                        <td>
                                            <i ng-show="filter.mental" class="fa fa-check"></i>
                                            <input name="mental" type="checkbox" ng-model="filter.mental"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.mental
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByCategory('социальные', filter.social)">
                                        <td>
                                            <i ng-show="filter.social" class="fa fa-check"></i>
                                            <input name="social" type="checkbox" ng-model="filter.social"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.social
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByCategory('кодекс чести', filter.kodeks)">
                                        <td>
                                            <i ng-show="filter.kodeks" class="fa fa-check"></i>
                                            <input name="kodeks" type="checkbox" ng-model="filter.kodeks"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.codex
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByCategory('Внешность', filter.face)">
                                        <td>
                                            <i ng-show="filter.face" class="fa fa-check"></i>
                                            <input name="face" type="checkbox" ng-model="filter.face"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.face
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByCategory('мистические', filter.mistic)">
                                        <td>
                                            <i ng-show="filter.mistic" class="fa fa-check"></i>
                                            <input name="mistic" type="checkbox" ng-model="filter.mistic"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.mystic
                                        </td>
                                    </tr>
                                    <tr ng-click="filterFlawsByUnremovable(search.unremovable)">
                                        <td>
                                            <i ng-show="search.unremovable" class="fa fa-check"></i>
                                            <input name="unremovable" type="checkbox" ng-model="search.unremovable"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.unremovable
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i ng-show="addedFlawsFilter" class="fa fa-check"></i>
                                            <input name="addedFlawsFilter" type="checkbox" ng-model="addedFlawsFilter"
                                                   style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.flaws_categories.gained
                                        </td>
                                    </tr>

                                </table>
                            </nav>

                            <div class="c-mask" ng-click="openHideFlawsCategoriesFilterMenu()"></div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="flawSearch.flaw.name" class="form-control"
                                           ng-i18next="[placeholder]page.character.search_flaw_placeholder"
                                           id="flawSearch">
                                </div>
                            </div>
                        </div>

                        <table class="table mobile">
                            <thead class="mobile">
                            <tr class="mobile">
                                <th class="mobile" ng-i18next>table.header.flaw</th>
                                <th class="mobile" ng-i18next>table.header.cost</th>
                                <th class="mobile"></th>
                            </tr>
                            </thead>
                            <tbody class="mobile"
                                   ng-repeat="flawMixed in flawsMixed | filter: flawSearch | orderBy:'flaw.name'">
                            <tr class="mobile flaw"
                                ng-hide="filteredFlaws(flawMixed)"
                                ng-class="addNotAddedClass(flawMixed.personageFlaw)">
                                <td class="text-right mobile flaw" ng-click="showHideDescription(flawMixed.flaw)"
                                    style="cursor:pointer;">
                                    <div class="text-left disable-select">
                                        <i ng-hide="isShowItem(flawMixed.flaw.id)"
                                           class="icmn-circle-down2 margin-inline"></i><i
                                            ng-show="isShowItem(flawMixed.flaw.id)"
                                            class="icmn-circle-up2 margin-inline"></i>{{flawMixed.flaw.name}}
                                    </div>
                                </td>

                                <td class="text-right mobile flaw">
                                    <div class="text-left" ng-if="!flawMixed.personageFlaw.personage_race_default">
                                        {{flawMixed.flaw.cost}}
                                    </div>
                                    <div class="text-left" ng-if="flawMixed.personageFlaw.personage_race_default"
                                         ng-i18next>
                                        general.by_default
                                    </div>
                                </td>


                                <td class="text-right mobile flaw actions">
                                    <div class="text-center">
                                        <div ng-if="flawMixed.personageFlaw == null">
                                            <button class="btn btn-rounded btn-warning btn-sm"
                                                    href="javascript: void(0)"
                                                    ng-click="addPersonageFlaw(flawMixed.flaw)" ng-i18next>
                                                popup.add_button
                                            </button>
                                        </div>
                                        <div ng-if="flawMixed.personageFlaw != null">
                                            <button class="btn btn-default-outline btn-rounded btn-sm"
                                                    style="cursor: pointer;"
                                                    ng-click="deletePersonageFlaw(flawMixed.personageFlaw)" ng-i18next>
                                                general.delete
                                            </button>
                                        </div>
                                        <div ng-if="flawMixed.personageFlaw.personage_race_default && flawMixed.personageFlaw.Flaw.unremovable"
                                             ng-i18next>
                                            page.character.flaw_cant_delete
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr ng-show="isShowItem(flawMixed.flaw.id)"
                                ng-class="addNotAddedClass(flawMixed.personageFlaw)">
                                <td colspan="3">
                                    <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                    {{flawMixed.flaw.description}}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="spells" class="tab-pane" role="tabpanel" style="display: none">
                        <div class="row hidden-xs-down hidden-sm-down">
                            <div class="col-md-2">
                                <h2 style="padding-top: 10px; padding-left: 5px"><span class="label label-warning"
                                                                                       ng-i18next>page.character.categories_label</span>
                                </h2>
                            </div>
                            <div class="col-md-2">
                                <div class="checkbox checkbox-info">
                                    <input id="allSchoolsFilter" name="magicSchools" type="checkbox"
                                           ng-model="filter.schools">
                                    <label for="allSchoolsFilter" ng-i18next>
                                        page.character.spells_categories.all
                                    </label>
                                </div>
                                <div class="checkbox checkbox-info">
                                    <input id="addedSpellsFilter" name="addedSpellsFilter" type="checkbox"
                                           ng-model="addedSpellsFilter" ng-change="openDetails = []">
                                    <label for="addedSpellsFilter" ng-i18next>
                                        page.character.spells_categories.gained
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="o-wrapper-spells hidden-md-up">

                            <nav class="c-menu c-menu--slide-bottom">
                                <div class="slide-down-button" ng-click="openHideSpellsCategoriesFilterMenu()"
                                     hm-swipeup="openHideSpellsCategoriesFilterMenu()"
                                     hm-swipedown="openHideSpellsCategoriesFilterMenu()" ng-i18next>
                                    page.character.categories_label_mobile
                                    <i class="fa fa-angle-double-down" ng-hide="isCategorySpellsMenuClose"></i>
                                    <i class="fa fa-angle-double-up" ng-show="isCategorySpellsMenuClose"></i>
                                </div>
                                <hr/>
                                <table class="table table-hover category-table"
                                       style="margin-bottom: 0">
                                    <tr>
                                        <td style="width: 15%;">
                                            <i ng-show="filter.schools" class="fa fa-check"></i>
                                            <input type="checkbox" ng-model="filter.schools" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.spells_categories.all
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <i ng-show="addedSpellsFilter" class="fa fa-check"></i>
                                            <input type="checkbox" ng-model="addedSpellsFilter" style="display: none;">
                                        </td>
                                        <td class="text-left" ng-i18next>
                                            page.character.spells_categories.gained
                                        </td>
                                    </tr>
                                </table>
                            </nav>

                            <div class="c-mask" ng-click="openHideSpellsCategoriesFilterMenu()"></div>
                        </div>

                        <br/>

                        <div class="form-group row">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="spellSearch.spell.name" class="form-control"
                                           ng-i18next="[placeholder]page.character.search_spell_placeholder"
                                           id="spellSearch">
                                </div>
                            </div>
                        </div>
                        <div ng-repeat="item in spellsBySchool | orderBy:'school.name'"
                             ng-show="isSchoolVisible(item, filter.schools)">
                            <h3>{{item.school.name}}</h3>
                            <table class="table mobile">
                                <thead class="mobile">
                                <tr class="mobile">
                                    <th ng-i18next>table.header.spell</th>
                                    <th ng-i18next>table.header.difficulty</th>
                                    <th ng-i18next>table.header.mana</th>
                                    <th ng-i18next>table.header.mana_support</th>
                                    <th ng-i18next>table.header.basic_spell</th>
                                    <th></th>
                                    <th ng-i18next>table.header.level</th>
                                    <th ng-i18next>table.header.cost</th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody class="mobile"
                                       ng-repeat="spellItem in item.spells | filter: spellSearch | orderBy:'spell.name'">
                                <tr class="mobile spells"
                                    ng-hide="spellItem.personageSpell == null && addedSpellsFilter"
                                    ng-class="addDisableOrNotAddedClass(item.added && isBaseSpellAdded(spellItem.spell), spellItem.personageSpell)">
                                    <td class="text-right mobile spell" ng-click="showHideDescription(spellItem.spell)"
                                        style="cursor:pointer;">
                                        <div class="text-left disable-select">
                                            <i ng-hide="isShowItem(spellItem.spell.id)"
                                               class="icmn-circle-down2 margin-inline"></i><i
                                                ng-show="isShowItem(spellItem.spell.id)"
                                                class="icmn-circle-up2 margin-inline"></i>{{spellItem.spell.name}}
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left">
                                            {{spellItem.spell.complexity}}
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left">
                                            {{spellItem.spell.mana}}
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left" ng-if="spellItem.spell.mana_support != null">
                                            {{spellItem.spell.mana_support}} {{spellItem.spell.mana_sup_time}}
                                        </div>
                                        <div class="text-left" ng-if="spellItem.spell.mana_support == null">
                                            -
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left" ng-if="spellItem.spell.BaseSpell != null">
                                            {{spellItem.spell.BaseSpell.name}}
                                        </div>
                                        <div class="text-left" ng-if="spellItem.spell.BaseSpell == null">
                                            -
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="btn-group btn-group-justified plus-minus-block">
                                            <div class="btn-group">
                                                <button class="btn btn-rounded btn-sm btn-secondary"
                                                        ng-click="decreaseSpellLevel(spellItem.personageSpell)"
                                                        type="button"
                                                        ng-disabled="spellItem.personageSpell == null">
                                                    <i class="icmn-minus"></i>
                                                </button>
                                            </div>
                                            <div class="btn-group">
                                                <button class="btn btn-rounded btn-sm btn-primary"
                                                        ng-click="increaseSpellLevel(spellItem.personageSpell)"
                                                        type="button"
                                                        ng-disabled="spellItem.personageSpell == null">
                                                    <i class="icmn-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left" ng-if="spellItem.personageSpell == null">
                                            -
                                        </div>
                                        <div class="text-left" ng-if="spellItem.personageSpell != null">
                                            {{spellItem.personageSpell.level}}
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell">
                                        <div class="text-left">
                                            {{spellItem.spell.cost}}
                                        </div>
                                    </td>

                                    <td class="text-right mobile spell actions">
                                        <div class="text-center">
                                            <div ng-if="spellItem.personageSpell == null">
                                                <button class="btn btn-rounded btn-warning btn-sm"
                                                        href="javascript: void(0)"
                                                        ng-click="addPersonageSpell(spellItem.spell)"
                                                        ng-disabled="!(item.added && isBaseSpellAdded(spellItem.spell))"
                                                        ng-i18next>
                                                    popup.add_button
                                                </button>
                                            </div>
                                            <div ng-if="spellItem.personageSpell != null">
                                                <button class="btn btn-default-outline btn-rounded btn-sm"
                                                        style="cursor: pointer;"
                                                        ng-click="deletePersonageSpell(spellItem.personageSpell)"
                                                        ng-i18next>
                                                    general.delete
                                                </button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr ng-show="isShowItem(spellItem.spell.id)" style="border-bottom: none"
                                    ng-class="addDisableOrNotAddedClass(item.added && isBaseSpellAdded(spellItem.spell), spellItem.personageSpell)">
                                    <td colspan="9">
                                        <strong class="padding-left-10" ng-i18next>page.character.spell_effect</strong>
                                        {{spellItem.spell.effect}}
                                    </td>
                                </tr>
                                <tr ng-show="isShowItem(spellItem.spell.id)"
                                    ng-class="addDisableOrNotAddedClass(item.added && isBaseSpellAdded(spellItem.spell), spellItem.personageSpell)">
                                    <td colspan="9">
                                        <strong class="padding-left-10" ng-i18next>page.character.description</strong>
                                        {{spellItem.spell.description}}
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="notes" class="tab-pane" role="tabpanel" style="display: none">
                        <p style="margin-left: 10px" ng-i18next>
                            page.character.notices_disclaimer
                        </p>

                        <button type="button" class="btn btn-primary btn-rounded" ng-click="addNotice()"
                                style="margin-left: 10px" ng-i18next>popup.add_button
                        </button>

                        <div class="form-group row notice-filter">
                            <div class="col-md-12">
                                <div class="form-input-icon">
                                    <i class="icmn-search"></i>
                                    <input type="text" ng-model="noticeSearch.name" class="form-control"
                                           ng-i18next="[placeholder]page.character.search_notice_placeholder"
                                           id="noticeSearch">
                                </div>
                            </div>
                        </div>

                        <table id="noticeTable" class="table table-hover"
                               style="margin-left: 10px; width: 95%; margin-top: 10px;">
                            <tr ng-repeat="notice in notices | orderBy:'-updatedAt' | filter: noticeSearch">
                                <td>
                                    <a class="link-underlined link-blue" ng-click="showNotice(notice)"
                                       style="cursor:pointer;">{{notice.name}}</a>
                                </td>
                                <td>
                                    <div ng-if="notice.experience > 0">
                                        {{notice.experience}}
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </section>

    </div>
</div>

<div class="main-backdrop"><!-- --></div>
</body>
</html>