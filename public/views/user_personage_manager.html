<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Персонажи</title>

    <link href="/assets/common/img/favicon.png" rel="icon" type="image/png">
    <link href="favicon.ico" rel="shortcut icon">

    <!-- Vendors Styles -->
    <!-- v1.0.0 -->
    <link rel="stylesheet" type="text/css" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/node_modules/bootstrap-select/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="/node_modules/dropify/dist/css/dropify.min.css">

    <!-- Clean UI Styles -->
    <link rel="stylesheet" type="text/css" href="/assets/common/css/main.min.css">

</head>
<body class="theme-default menu-left mode-material layout-boxed mode-box-shadow" ng-app="personageManagerApp">
<div class="boxed-container" ng-controller="permissionsController">

    <nav class="left-menu" left-menu ng-class="{'hidden-left-menu': hideLeftMenu}">
        <div class="logo-container">
            <a href="#" class="logo">
                <h1>ЭРИЛОН</h1>
            </a>
        </div>
        <div class="left-menu-inner scroll-pane">
            <ul class="left-menu-list left-menu-list-root list-unstyled">
                <li class="left-menu-list-active">
                    <a class="left-menu-link" href="/views/user_personage_manager.html?id={{player.id}}">
                        <i class="left-menu-link-icon fa fa-users"><!-- --></i>
                        Персонажи
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/races/race_manager.html">
                        <i class="left-menu-link-icon fa fa-users"><!-- --></i>
                        Расы
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/attributes/attribute_manager.html">
                        <i class="left-menu-link-icon fa  fa-diamond"><!-- --></i>
                        Атрибуты
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/merits/merit_manager.html">
                        <i class="left-menu-link-icon fa fa-smile-o"><!-- --></i>
                        Достоинства
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/inherents/inherent_manager.html">
                        <i class="left-menu-link-icon fa fa-american-sign-language-interpreting"><!-- --></i>
                        Врожденные особенности
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/flaws/flaw_manager.html">
                        <i class="left-menu-link-icon fa fa-meh-o"><!-- --></i>
                        Недостатки
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/attached_skills/attached_skills_manager.html">
                        <i class="left-menu-link-icon fa fa-asterisk"><!-- --></i>
                        Прикрепленные навыки
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/trigger_skills/trigger_skills_manager.html">
                        <i class="left-menu-link-icon icmn-stack3"><!-- --></i>
                        Тригерные навыки
                    </a>
                </li>
                <li>
                    <a class="left-menu-link" href="/views/spells/spells_manager.html">
                        <i class="left-menu-link-icon fa fa-fire"><!-- --></i>
                        Заклинания
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <nav class="top-menu" ng-class="{'hidden-top-menu': hideTopMenu}">
        <div class="menu-icon-container hidden-md-up">
            <div class="animate-menu-button left-menu-toggle">
                <div><!-- --></div>
            </div>
        </div>
        <div class="menu">
            <div class="menu-user-block">
                <div class="dropdown dropdown-avatar">
                    <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="user-name">Игрок: <strong>{{player.name}}</strong></span>
                        <span class="avatar" href="#">
                        <img src="/assets/common/img/temp/avatars/4.jpg" alt="Alternative text to the image">
                    </span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                        <a class="dropdown-item" href="/views/profile/profile.html"><i class="dropdown-icon icmn-user"></i> Профиль</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="/views/user_personage_manager.html?id={{player.id}}"><i
                                class="dropdown-icon icmn-circle-right"></i> Мои персонажи</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="/" ng-click="deleteUserCookie()"><i
                                class="dropdown-icon icmn-exit"></i> Сменить профиль</a>
                        <div class="dropdown-divider" ng-show="hasManagePermissionsAccess()"></div>
                        <a class="dropdown-item" href="/views/permissions/managePermissions.html"
                           ng-show="hasManagePermissionsAccess()"><i class="dropdown-icon icmn-cog2"></i> Управление
                            доступом</a>
                    </ul>
                </div>
            </div>

            <div class="menu-info-block">
                <div class="left">
                    <div class="menu-info-block">
                        <div class="example-buy-btn hidden-xs-down">
                            <div class="btn expir btn-success-outline btn-rounded">
                                Права: {{player.Role.name}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </nav>

    <section class="page-content">

        <!-- Add User -->
        <div ng-controller="addPersonageController">
            <section class="panel">
                <div class="panel-heading">
                    <h3 class="text-center">Добавить персонажа</h3>
                </div>
                <div class="panel-body">
                    <br>
                    <form class="" name="createPersonageForm" id="createPersonageForm">
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label" for="name">Имя</label>
                                    <input class="form-control form-control-rounded" name="personageName"
                                           placeholder="Имя персонажа..." id="name" ng-model="name"
                                           type="text" required>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-group" ng-click="selectRefresh()">
                                    <label for="race_id">Раса</label>

                                    <select class="selectpicker form-control form-control-rounded"
                                            name="race"
                                            ng-model="race_id" id="race_id"
                                            ng-options="race.id as race.name for race in races" required>
                                        <option style="display:none" value="">Выберите расу...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label" for="experience">Очки опыта</label>
                                    <input class="form-control form-control-rounded" id="experience"
                                           name="experience" ng-model="experience" min="0" type="number" required>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label" for="createPersonageButton">&nbsp;</label><br>
                                    <button type="submit" id="createPersonageButton"
                                            class="btn btn-rounded btn-block btn-info"
                                            ng-disabled="createPersonageForm.$invalid"
                                            ng-click="createPersonage()">Создать
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </div>

        <!-- Personages -->
        <div ng-controller="personageListController">

            <section class="panel">
                <div class="panel-heading"><h3 class="text-center">Персонажи</h3></div>
                <div class="panel-body">
                    <div ng-show="hasViewPermission('AllPersonages')">
                        <button type="button" class="btn btn-rounded btn-success margin-inline"
                                ng-click="showAllPersonages()">Показать всех
                            персонажей
                        </button>
                        <button type="button" class="btn btn-rounded btn-info margin-inline"
                                ng-click="showMyPersonages()">Показать моих
                            персонажей
                        </button>
                    </div>
                    <h4 class="text-center" ng-show="personages.length == 0">
                        <small>
                            Вы еще не создали ни одного персонажа, для создания воспользуйтесь формой выше.
                        </small>
                    </h4>
                    <div class="row messaging">
                        <div class="messaging-list">
                            <div class="messaging-list-item"
                                 ng-repeat="personage in personages | orderBy : 'id'">
                                <div class="s1">
                                    <img class="avatar" ng-click="uploadPersonageAvatar(personage.id)"
                                         ng-src="http://res.cloudinary.com/hjzqny4m9/image/upload/v1497780414/{{avatar(personage.id)}}"
                                         alt="Здесь должен быть аватар">
                                </div>
                                <div class="s2">
                                    <h4>{{personage.name}}</h4>
                                    <a href="/views/personage_logic/view_personage.html?id={{personage.id}}">
                                        <button class="btn btn-rounded btn-sm btn-success-outline margin-inline">
                                            <i
                                                    class="icmn-eye4"></i> Просмотр
                                        </button>
                                    </a>
                                    <a href="/views/personage_logic/create_personage.html?id={{personage.id}}">
                                        <button ng-hide="personage.generated" class="btn btn-rounded btn-sm btn-info-outline margin-inline"><i
                                                class="fa fa-pencil"></i> Продолжить создание
                                        </button>
                                    </a>
                                    <a href="/views/personage_logic/edit_personage.html?id={{personage.id}}">
                                        <button class="btn btn-rounded btn-sm btn-warning-outline margin-inline">
                                            <i
                                                    class="fa fa-universal-access"></i>
                                            Прокачка
                                        </button>
                                    </a>
                                    <button ng-click="deletePersonage(personage)"
                                            class="btn btn-rounded btn-sm btn-danger-outline margin-inline"><i
                                            class="fa fa-trash"></i> Удалить
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>


    </section>

</div>

<div class="main-backdrop"><!-- --></div>
</body>
<link rel="stylesheet" type="text/css" href="/node_modules/sweetalert2/dist/sweetalert2.min.css">

<!-- Vendors Scripts -->
<!-- v1.0.0 -->
<script src="/node_modules/jquery/dist/jquery.min.js"></script>
<script src="/node_modules/tether/dist/js/tether.min.js"></script>
<script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/node_modules/jscrollpane/script/jquery.jscrollpane.min.js"></script>
<script src="/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
<script src="/node_modules/datatables-fixedcolumns/js/dataTables.fixedColumns.js"></script>
<script src="/node_modules/datatables-responsive/js/dataTables.responsive.js"></script>
<script src="/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
<script src="/node_modules/chart.js/dist/Chart.bundle.min.js"></script>
<script src="/node_modules/sweetalert2/dist/sweetalert2.min.js"></script>
<script src="/node_modules/dropify/dist/js/dropify.min.js"></script>

<script type="text/javascript" src="/node_modules/angular/angular.min.js"></script>
<script type="text/javascript" src="/node_modules/ngstorage/ngStorage.min.js"></script>

<script src="/assets/common/js/common.min.js"></script>
<script src="permissions/permissions.js"></script>
<script src="personage_manager.js"></script>
<script src="permissions/check_player_permissions.js"></script>
</html>